{% extends 'base.html' %}

{% block title %}–ö—É—Ä—Å–æ–≤–µ - EduLearn{% endblock %}

{% block content %}

    <!-- –§–æ—Ä–º–∞ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –∏ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ -->
    <form method="GET" action="{% url 'courses' %}" class="search-form">
        <!-- –¢—ä—Ä—Å–∞—á–∫–∞ -->
        <input type="text" name="q" placeholder="üîç –¢—ä—Ä—Å–µ–Ω–µ –Ω–∞ –∫—É—Ä—Å–æ–≤–µ..."
               value="{{ query|default_if_none:'' }}">

        <!-- –§–∏–ª—Ç—ä—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è -->
        <select name="category">
            <option value="">–í—Å–∏—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            <option value="programming" {% if category == "programming" %}selected{% endif %}>–ü—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ</option>
            <option value="design" {% if category == "design" %}selected{% endif %}>–î–∏–∑–∞–π–Ω</option>
            <option value="marketing" {% if category == "marketing" %}selected{% endif %}>–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</option>
            <option value="business" {% if category == "business" %}selected{% endif %}>–ë–∏–∑–Ω–µ—Å</option>
        </select>

        <!-- –§–∏–ª—Ç—ä—Ä –ø–æ —Ü–µ–Ω–∞ -->
        <input type="number" name="min_price" placeholder="–ú–∏–Ω. —Ü–µ–Ω–∞ (–ª–≤.)"
               value="{{ min_price|default_if_none:'' }}">
        <input type="number" name="max_price" placeholder="–ú–∞–∫—Å. —Ü–µ–Ω–∞ (–ª–≤.)"
               value="{{ max_price|default_if_none:'' }}">

        <!-- –§–∏–ª—Ç—ä—Ä –ø–æ —Ä–µ–π—Ç–∏–Ω–≥ -->
        <select name="rating">
            <option value="">–ú–∏–Ω. —Ä–µ–π—Ç–∏–Ω–≥</option>
            <option value="1" {% if min_rating == "1" %}selected{% endif %}>1 ‚≠ê</option>
            <option value="2" {% if min_rating == "2" %}selected{% endif %}>2 ‚≠ê</option>
            <option value="3" {% if min_rating == "3" %}selected{% endif %}>3 ‚≠ê</option>
            <option value="4" {% if min_rating == "4" %}selected{% endif %}>4 ‚≠ê</option>
            <option value="5" {% if min_rating == "5" %}selected{% endif %}>5 ‚≠ê</option>
        </select>

        <!-- –ë—É—Ç–æ–Ω –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –∏ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ -->
        <button type="submit">üîç –ü—Ä–∏–ª–æ–∂–∏</button>
    </form>

    {#    <h1 class=" course-title text-3xl font-bold mb-6">–í—Å–∏—á–∫–∏ –∫—É—Ä—Å–æ–≤–µ</h1>#}
    {##}
    {#    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">#}
    {#        {% for course in courses %}#}
    {#            <div class="bg-white shadow-xl rounded-lg overflow-hidden transform transition-transform hover:scale-105">#}
    {#                {% if course.image %}#}
    {#                    <div class="course-image-container">#}
    {#                        <img src="{{ course.image.url }}" alt="{{ course.title }}" class="course-image">#}
    {#                    </div>#}
    {#                {% endif %}#}
    {#                <div class="p-4">#}
    {##}
    {#                    <h2 class="text-xl font-semibold text-gray-800 ">{{ course.title }}</h2>#}
    {#                    <h2 class="text-xl font-semibold text-gray-800 text-center">#}
    {#                        {{ course.title }}#}
    {#                    </h2>#}
    {#                    <hr class="mt-3 border-t-2 border-gray-400">#}
    {##}
    {##}
    {#                    <!--–ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Å—Ä–µ–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥ -->#}
    {#                    <p class="text-yellow-600 font-semibold mt-4 mb-4">#}
    {#                        ‚≠ê –°—Ä–µ–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: {{ course.average_rating|default:"–ù—è–º–∞ —Ä–µ–π—Ç–∏–Ω–≥" }} / 5#}
    {#                    </p>#}
    {##}
    {#                    <p class="text-gray-600 mt-2">{{ course.description|truncatechars:100 }}</p>#}
    {#                    <p class="mt-4 text-blue-600 font-bold">{{ course.price }} –ª–≤.</p>#}
    {#                    <a href="{% url 'course_detail' course.id %}"#}
    {#                       class="block mt-4 bg-blue-600 text-white py-2 px-4 text-center rounded-lg hover:bg-blue-700">#}
    {#                        –í–∏–∂ –ø–æ–≤–µ—á–µ#}
    {#                    </a>#}
    {##}
    {#                    <!-- –ü—Ä–æ–≤–µ—Ä—è–≤–∞–º–µ –¥–∞–ª–∏ —Ç–µ–∫—É—â–∏—è—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –µ —Å—ä–∑–¥–∞—Ç–µ–ª—è—Ç –Ω–∞ –∫—É—Ä—Å–∞ -->#}
    {#                    {% if request.user == course.creator %}#}
    {#                        <div class="mt-2 flex space-x-2">#}
    {#                            <a href="{% url 'edit_course' course.id %}"#}
    {#                               class="bg-yellow-500 px-3 py-2 rounded text-white hover:bg-yellow-700">#}
    {#                                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π#}
    {#                            </a>#}
    {#                            <a href="{% url 'delete_course' course.id %}"#}
    {#                               class="bg-red-500 px-3 py-2 rounded text-white hover:bg-red-700">#}
    {#                                üóë –ò–∑—Ç—Ä–∏–π#}
    {#                            </a>#}
    {#                        </div>#}
    {#                    {% endif %}#}
    {#                </div>#}
    {#            </div>#}
    {#        {% empty %}#}
    {#            <p class="text-gray-500">–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –∫—É—Ä—Å–æ–≤–µ.</p>#}
    {#        {% endfor %}#}
    {#    </div>#}

    <div class="all-courses-container">
        <h1 class="all-courses-title">–í—Å–∏—á–∫–∏ –∫—É—Ä—Å–æ–≤–µ</h1>

        <div class="all-courses-grid">
            {% for course in courses %}
                <div class="course-card">
                    {% if course.image %}
                        <div class="course-image-container">
                            <img src="{{ course.image.url }}" alt="{{ course.title }}" class="course-image">
                        </div>
                    {% endif %}
                    <div class="p-4">
                        <h2>{{ course.title }}</h2>
                        <hr class="mt-3 border-t-2 border-gray-400">
                        <p class="course-rating">‚≠ê –°—Ä–µ–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: {{ course.average_rating|default:"–ù—è–º–∞ —Ä–µ–π—Ç–∏–Ω–≥" }} /
                            5</p>
                        <p class="course-price">{{ course.price }} –ª–≤.</p>

                        {#                    <a href="{% url 'course_detail' course.id %}" class="course-button">–í–∏–∂ –ø–æ–≤–µ—á–µ</a>#}
                        <a href="{% url 'course_detail' course.id %}" class="course-list-button">
                            –í–∏–∂ –ø–æ–≤–µ—á–µ
                        </a>


                        {% if request.user == course.creator %}
                            <div class="course-actions">
                                <a href="{% url 'edit_course' course.id %}" class="edit-button">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π</a>
                                <a href="{% url 'delete_course' course.id %}" class="delete-button">üóë –ò–∑—Ç—Ä–∏–π</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% empty %}
                <p class="text-gray-500 text-center">–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –∫—É—Ä—Å–æ–≤–µ.</p>
            {% endfor %}
        </div>
    </div>


{% endblock %}
