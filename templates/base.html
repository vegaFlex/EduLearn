{% load static %}

<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}EduLearn{% endblock %}</title>
    <link href="{% static 'css/output.css' %}" rel="stylesheet">
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">
    <script src="{% static 'js/script.js' %}"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">


</head>
<body class="bg-gray-100 text-gray-900">

<!-- Flash Messages -->
{#{% if messages %}#}
{#    <div class="fixed top-4 right-4 z-50">#}
{#        {% for message in messages %}#}
{#            <div class="mb-2 px-4 py-3 rounded-lg text-white shadow-lg#}
{#                        {% if message.tags == 'success' %} bg-green-500#}
{#                        {% elif message.tags == 'error' %} bg-red-500#}
{#                        {% elif message.tags == 'info' %} bg-blue-500#}
{#                        {% endif %}">#}
{#                {{ message }}#}
{#            </div>#}
{#        {% endfor %}#}
{#    </div>#}
{#{% endif %}#}

{% if messages %}
    <div id="messages-container">
        {% for message in messages %}
            <div class="custom-message">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}

{#<!-- Alpine.js –∑–∞ –¥—Ä–æ–ø–¥–∞—É–Ω –º–µ–Ω—é -->#}
{#<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>#}

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav class="bg-blue-600 text-white py-2">
    <div class="container mx-auto flex items-center justify-between">
        <!-- –õ–æ–≥–æ -->
        <a href="{% url 'home' %}" class="nav-logo flex items-center">EduLearn</a>

        <!-- –ë—É—Ç–æ–Ω –∑–∞ –º–æ–±–∏–ª–Ω–æ –º–µ–Ω—é (—Å–∞–º–æ –Ω–∞ –º–æ–±–∏–ª–Ω–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞) -->
        <button id="mobile-menu-button" class="md:hidden text-white text-4xl focus:outline-none">
            ‚ò∞
        </button>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∏ –±—É—Ç–æ–Ω–∏ –∑–∞ –î–ï–°–ö–¢–û–ü -->
        <ul id="nav-menu" class="hidden md:flex items-center space-x-4">
            <li><a href="{% url 'courses' %}" class="nav-button">–ö—É—Ä—Å–æ–≤–µ</a></li>

            {% if request.user.is_authenticated %}
                <!-- –î—Ä–æ–ø–¥–∞—É–Ω –º–µ–Ω—é –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è -->
                <li class="relative">
                    <button id="user-dropdown-btn" class="nav-button flex items-center">
                        <span class="font-semibold">{{ request.user.email }}</span>
                        <span class="dropdown-arrow ml-2">‚ñº</span>
                    </button>

                    <!-- –î—Ä–æ–ø–¥–∞—É–Ω —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ -->
                    <div id="user-dropdown" class="user-dropdown hidden">
                        <a href="{% url 'my_courses' %}" class="dropdown-item">üìö –ú–æ–∏—Ç–µ –∫—É—Ä—Å–æ–≤–µ</a>

                        {% if request.user.role == "teacher" %}
                            <a href="{% url 'admin:index' %}" class="dropdown-item">‚öôÔ∏è –ê–¥–º–∏–Ω</a>
                        {% endif %}

                        <a href="{% url 'logout' %}" class="dropdown-item text-red-600">üö™ –ò–∑—Ö–æ–¥</a>
                    </div>
                </li>
            {% else %}
                <li><a href="{% url 'login' %}" class="nav-button">–í—Ö–æ–¥</a></li>
                <li><a href="{% url 'register' %}" class="nav-button">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
            {% endif %}
        </ul>
    </div>

    <!-- üìå –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∏ –±—É—Ç–æ–Ω–∏ –∑–∞ –ú–û–ë–ò–õ–ù–ò -->
    <ul id="mobile-nav-menu" class="hidden flex-col items-center bg-blue-700 text-white py-4 space-y-2 md:hidden">
        <li><a href="{% url 'courses' %}" class="nav-button block w-full text-center">–ö—É—Ä—Å–æ–≤–µ</a></li>

        {% if request.user.is_authenticated %}
            <li class="relative">
                <!-- üìå –ë—É—Ç–æ–Ω –∑–∞ –º–æ–±–∏–ª–Ω–∏—è –¥—Ä–æ–ø–¥–∞—É–Ω -->
                <button id="mobile-user-dropdown-btn" class="nav-button flex items-center">
                    <span class="font-semibold">{{ request.user.email }}</span>
                    <span class="dropdown-arrow ml-2">‚ñº</span>
                </button>

                <!-- üìå –î—Ä–æ–ø–¥–∞—É–Ω —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –∑–∞ –º–æ–±–∏–ª–Ω–∞ –≤–µ—Ä—Å–∏—è -->
                <div id="mobile-user-dropdown" class="user-dropdown hidden">
                    <a href="{% url 'my_courses' %}" class="dropdown-item">üìö –ú–æ–∏—Ç–µ –∫—É—Ä—Å–æ–≤–µ</a>

                    {% if request.user.role == "teacher" %}
                        <a href="{% url 'admin:index' %}" class="dropdown-item">‚öôÔ∏è –ê–¥–º–∏–Ω</a>
                    {% endif %}

                    <a href="{% url 'logout' %}" class="dropdown-item text-red-600">üö™ –ò–∑—Ö–æ–¥</a>
                </div>
            </li>
        {% else %}
            <li><a href="{% url 'login' %}" class="nav-button">–í—Ö–æ–¥</a></li>
            <li><a href="{% url 'register' %}" class="nav-button">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
        {% endif %}
    </ul>

</nav>


<!-- –û—Å–Ω–æ–≤–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ -->
<div class="container mx-auto p-6">
    {% block content %}{% endblock %}
</div>

<!-- –§—É—Ç—ä—Ä -->
<footer class="bg-blue-600 text-white text-center p-4 mt-10">
    <p>&copy; 2025 EduLearn - –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.</p>
</footer>

{# —Å–∫—Ä–∏–ø—Ç –∑–∞ –≤—Å–∏—á–∫–∏ —Å—ä–æ–±—â–µ–Ω–∏—è #}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let messages = document.querySelectorAll(".custom-message");
        messages.forEach(function (message) {
            setTimeout(function () {
                message.classList.add("hide-message");
            }, 5000);  // –ò–∑—á–µ–∑–≤–∞ —Å–ª–µ–¥ 5 —Å–µ–∫—É–Ω–¥–∏
        });
    });
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{# —Å–∫—Ä–∏–ø—Ç –∑–∞ –¥–∏–Ω–∞–º–∏—á–µ–Ω —Å–ª–∞–π–¥–µ—Ä#}
{#<script>#}
{#    document.addEventListener("DOMContentLoaded", function () {#}
{#        let carousel = new bootstrap.Carousel(document.getElementById('eduLearnCarousel'), {#}
{#            interval: 3000, // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –≤—Å–µ–∫–∏ 3 —Å–µ–∫—É–Ω–¥–∏#}
{#            wrap: true // –ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞ –±–µ–∑–∫—Ä–∞–π–Ω–æ#}
{#        });#}
{#    });#}
{#</script>#}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let carousel = new bootstrap.Carousel(document.getElementById('eduLearnCarousel'), {
            interval: 3000, // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –≤—Å–µ–∫–∏ 3 —Å–µ–∫—É–Ω–¥–∏
            wrap: true, // –ë–µ–∑–∫—Ä–∞–π–Ω–æ –ø—Ä–µ–≤—ä—Ä—Ç–∞–Ω–µ
            ride: 'carousel' // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞ –ø–ª–∞–≤–µ–Ω –µ—Ñ–µ–∫—Ç
        });
    });
</script>


</body>
</html>
